<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>达合</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="达合">
<meta name="keywords" content="达合">
<meta property="og:type" content="website">
<meta property="og:title" content="达合">
<meta property="og:url" content="http://www.daahe.com/page/3/index.html">
<meta property="og:site_name" content="达合">
<meta property="og:description" content="达合">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="达合">
<meta name="twitter:description" content="达合">
  
    <link rel="alternate" href="/atom.xml" title="达合" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <!-- link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css" -->
    <link href="https://fonts.googleapis.cnpmjs.org/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">达合</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">天地达 人自合</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.daahe.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-jvm-e5-86-85-e5-ad-98-e5-8c-ba-e5-9f-9f-e5-88-92-e5-88-86eden-space-e3-80-81survivor-space-e3-80-81tenured-gen-ef-bc-8cperm-gen-e8-a7-a3-e9-87-8a" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/06/jvm-e5-86-85-e5-ad-98-e5-8c-ba-e5-9f-9f-e5-88-92-e5-88-86eden-space-e3-80-81survivor-space-e3-80-81tenured-gen-ef-bc-8cperm-gen-e8-a7-a3-e9-87-8a/" class="article-date">
  <time datetime="2015-05-06T01:04:35.000Z" itemprop="datePublished">2015-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/06/jvm-e5-86-85-e5-ad-98-e5-8c-ba-e5-9f-9f-e5-88-92-e5-88-86eden-space-e3-80-81survivor-space-e3-80-81tenured-gen-ef-bc-8cperm-gen-e8-a7-a3-e9-87-8a/">JVM内存区域划分Eden Space、Survivor Space、Tenured Gen，Perm Gen解释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>jvm区域总体分两类，heap区和非heap区。heap区又分：Eden Space（伊甸园）、Survivor Space(幸存者区)、Tenured Gen（老年代-养老区）。 非heap区又分：Code Cache(代码缓存区)、Perm Gen（永久代）、Jvm Stack(java虚拟机栈)、Local Method Statck(本地方法栈)。 HotSpot虚拟机GC算法采用分代收集算法： 1、一个人（对象）出来（new 出来）后会在Eden Space（伊甸园）无忧无虑的生活，直到GC到来打破了他们平静的生活。GC会逐一问清楚每个对象的情况，有没有钱（此对象的引用）啊，因为GC想赚钱呀，有钱的才可以敲诈嘛。然后富人就会进入Survivor Space（幸存者区），穷人的就直接kill掉。 2、并不是进入Survivor Space（幸存者区）后就保证人身是安全的，但至少可以活段时间。GC会定期（可以自定义）会对这些人进行敲诈，亿万富翁每次都给钱，GC很满意，就让其进入了Genured Gen(养老区)。万元户经不住几次敲诈就没钱了，GC看没有啥价值啦，就直接kill掉了。 3、进入到养老区的人基本就可以保证人身安全啦，但是亿万富豪有的也会挥霍成穷光蛋，只要钱没了，GC还是kill掉。 分区的目的：新生区由于对象产生的比较多并且大都是朝生夕灭的，所以直接采用标记-清理算法。而养老区生命力很强，则采用复制算法，针对不同情况使用不同算法。 非heap区域中Perm Gen中放着类、方法的定义，jvm Stack区域放着方法参数、局域变量等的引用，方法执行顺序按照栈的先入后出方式。  </p>
<h2 id="GC工作机制"><a href="#GC工作机制" class="headerlink" title="GC工作机制"></a>GC工作机制</h2><p>SUN的jvm内存池被划分为以下几个部分： <strong>Eden**</strong> Space (heap)<strong> 内存最初从这个线程池分配给大部分对象。   </strong>Survivor Space (heap)<strong> 用于保存在eden space内存池中经过垃圾回收后没有被回收的对象。   </strong>Tenured Generation (heap)<strong> 用于保持已经在survivor space内存池中存在了一段时间的对象。   </strong>Permanent Generation (non-heap)<strong> 保存虚拟机自己的静态(reflective)数据，例如类（class）和方法（method）对象。Java虚拟机共享这些类数据。这个区域被分割为只读的和只写的。   </strong>Code Cache (non-heap)** HotSpot Java虚拟机包括一个用于编译和保存本地代码（native code）的内存，叫做“代码缓存区”（code cache）。   简单来讲，jvm的内存回收过程是这样的： 对象在Eden Space创建，当Eden Space满了的时候，gc就把所有在Eden Space中的对象扫描一次，把所有有效的对象复制到第一个Survivor Space，同时把无效的对象所占用的空间释放。当Eden Space再次变满了的时候，就启动移动程序把Eden Space中有效的对象复制到第二个Survivor Space，同时，也将第一个Survivor Space中的有效对象复制到第二个Survivor Space。如果填充到第二个Survivor Space中的有效对象被第一个Survivor Space或Eden Space中的对象引用，那么这些对象就是长期存在的，此时这些对象将被复制到Permanent Generation。 若垃圾收集器依据这种小幅度的调整收集不能腾出足够的空间，就会运行Full GC，此时jvm gc停止所有在堆中运行的线程并执行清除动作。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/05/06/jvm-e5-86-85-e5-ad-98-e5-8c-ba-e5-9f-9f-e5-88-92-e5-88-86eden-space-e3-80-81survivor-space-e3-80-81tenured-gen-ef-bc-8cperm-gen-e8-a7-a3-e9-87-8a/" data-id="cjnibxghh006sgg0fvk07pudj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jps-e3-80-81jinfo-e3-80-81jstat-e3-80-81jstack-e3-80-81jmap-e3-80-81jconsole-e7-ad-89-e5-91-bd-e4-bb-a4-e7-ae-80-e4-bb-8b" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/06/jps-e3-80-81jinfo-e3-80-81jstat-e3-80-81jstack-e3-80-81jmap-e3-80-81jconsole-e7-ad-89-e5-91-bd-e4-bb-a4-e7-ae-80-e4-bb-8b/" class="article-date">
  <time datetime="2015-05-06T00:44:22.000Z" itemprop="datePublished">2015-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/06/jps-e3-80-81jinfo-e3-80-81jstat-e3-80-81jstack-e3-80-81jmap-e3-80-81jconsole-e7-ad-89-e5-91-bd-e4-bb-a4-e7-ae-80-e4-bb-8b/">jps、jinfo、jstat、jstack、jmap、jconsole等命令简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>JDK提供了几个很实用的工具，如下： <strong>jinfo</strong>：观察运行中的java程序的运行环境参数：参数包括Java System属性和JVM命令行参数，java class path等信息。命令格式：jinfo 进程pid <strong>jps</strong>：用来显示本地的java进程，可以查看本地运行着几个java程序，并显示他们的进程号。命令格式：jps   或 jps 远程服务ip地址    （默认端口1099） <strong>jstat</strong>：一个极强的监视VM内存工具。可以用来监视VM内存内的各种堆和非堆的大小及其内存使用量。 <strong>jstack</strong>：可以观察到jvm中当前所有线程的运行情况和线程当前状态。, 如果现在运行的java程序呈现hung的状态，jstack是非常有用的。命令格式：jstack 进程pid <strong>当程序出现死锁的时候，使用命令：jstack 进程ID &gt; jstack.log，然后在jstack.log文件中，搜索关键字“BLOCKED”，定位到引起死锁的地方。</strong> <strong>jmap</strong>：观察运行中的jvm物理内存的占用情况（如：产生哪些对象，及其数量）。命令格式：jmap [option] pid option参数如下： <strong>-heap</strong>：打印jvm heap的情况 <strong>             -histo：</strong>打印jvm heap的直方图。其输出信息包括类名，对象数量，对象占用大小。 <strong>             -histo：live ：</strong>同上，但是只答应存活对象的情况 <strong>             -permstat：</strong>打印permanent generation heap情况 使用jmap进行 heap dump的例子： jmap -dump:format=b,file=<filename> <pid> 打印内存统计图：jmap -histo:live <pid> 结果中每行显示了当前堆中每种类类型的信息，包含被分配的实例个数及其消耗的字节数。选项“live”，表示只统计存活的对象 需要注意的是，jmap不是运行分析工具，在生成统计图时JVM可能会暂停，因此当生成统计图时需要确认这种暂停对程序是可接受的。 <strong>jconsole</strong>：一个java GUI监视工具，可以以图表化的形式显示各种数据。并可通过远程连接监视远程的服务器VM。</pid></pid></filename></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/05/06/jps-e3-80-81jinfo-e3-80-81jstat-e3-80-81jstack-e3-80-81jmap-e3-80-81jconsole-e7-ad-89-e5-91-bd-e4-bb-a4-e7-ae-80-e4-bb-8b/" data-id="cjnibxghg006pgg0fjri3qxki" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-vm-e5-8f-82-e6-95-b0-e9-85-8d-e7-bd-ae" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/06/java-vm-e5-8f-82-e6-95-b0-e9-85-8d-e7-bd-ae/" class="article-date">
  <time datetime="2015-05-05T23:09:41.000Z" itemprop="datePublished">2015-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/06/java-vm-e5-8f-82-e6-95-b0-e9-85-8d-e7-bd-ae/">Java VM参数配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 内部服务参数配置：</p>
<p>JAVA_OPTS=”-server -XX:+UseParNewGC -Xms1024m -Xmx2048m -XX:MaxNewSize=128m -XX:NewSize=128m -XX:PermSize=96m -XX:MaxPermSize=128m -XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:CMSInitiatingOccupancyFraction=1 -XX:+CMSIncrementalMode -XX:MaxTenuringThreshold=0 -XX:SurvivorRatio=20000 -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0  -XX:CMSIncrementalDutyCycleMin=10 -XX:CMSIncrementalDutyCycle=30 -XX:CMSMarkStackSize=8M -XX:CMSMarkStackSizeMax=32M” 前端应用参数配置：</p>
<p> JAVA_OPTS=”-server  -Xmx4096m -Xms4096m -Xmn480m -Xss256k -XX:PermSize=128m -XX:MaxPermSize=256m -XX:+UseConcMarkSweepGC -XX:ParallelGCThreads=8 -XX:CMSFullGCsBeforeCompaction=0 -XX:+UseCMSCompactAtFullCollection -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:GCTimeRatio=19 -Xnoclassgc -XX:+DisableExplicitGC -XX:+UseParNewGC -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=70 -XX:SoftRefLRUPolicyMSPerMB=0”</p>
<p>  参数说明： <strong>-Xmx1280m</strong>：设置JVM最大可用内存为1280m。最大可设为3550m。具体应用可适当调整。 <strong>-Xms1280m</strong>：设置JVM初始内存为1280m。此值可以设置与-Xmx相同，以避免每次垃圾回收完成后JVM重新分配内存。 <strong>-Xmn480m</strong>：设置年轻代大小为480m。整个堆大小=年轻代大小 + 年老代大小 + 持久代大小。持久代一般固定大小为64m，所以增大年轻代后，将会减小年老代大小。此值对系统性能影响较大，Sun官方推荐配置为整个堆的3/8。 <strong>-Xss256k</strong>：设置每个线程的堆栈大小。JDK5.0以后每个线程堆栈大小为1M，以前每个线程堆栈大小为256K。更具应用的线程所需内存大小进行调整。在相同物理内存下，减小这个值能生成更多的线程。但是操作系统对一个进程内的线程数还是有限制的，不能无限生成，经验值在3000~5000左右。 <strong>-XX:PermSize=64m</strong>：指定 jvm 中 Perm Generation 的最小值。 这个参数需要看你的实际情况。可以通过jmap 命令看看到底需要多少。 <strong>-XX:MaxPermSize=128m</strong>：指定 Perm Generation 的最大值 <strong>-XX:+UseConcMarkSweepGC**</strong>：<strong>设置并发收集器 </strong>-XX:ParallelGCThreads=8<strong>**：</strong>配置并行收集器的线程数，即：同时多少个线程一起进行垃圾回收。此值最好配置与处理器数目相等。 <strong>-XX:CMSFullGCsBeforeCompaction=0**</strong>：<strong>由于并发收集器不对内存空间进行压缩、整理，所以运行一段时间以后会产生“碎片”，使得运行效率降低。此值设置运行多少次GC以后对内存空间进行压缩、整理。 </strong>-XX:+UseCMSCompactAtFullCollection<strong>**：</strong>打开对年老代的压缩。可能会影响性能，但是可以消除碎片。 <strong>-XX:SurvivorRatio=8**</strong>：<strong>每个survivor space 和 eden之间的比例。 </strong>-XX:MaxTenuringThreshold=7<strong>**：</strong>设置垃圾最大年龄。如果设置为0的话，则年轻代对象不经过Survivor区，直接进入年老代。对于年老代比较多的应用，可以提高效率。如果将此值设置为一个较大值，则年轻代对象会在Survivor区进行多次复制，这样可以增加对象再年轻代的存活时间，增加在年轻代即被回收的概率。 <strong>-XX:GCTimeRatio=19**</strong>：<strong>设置垃圾回收时间占程序运行时间的百分比，公式为1/(1+n)。 </strong>-Xnoclassgc<strong>**：</strong>禁用类垃圾回收，性能会有一定提高。 <strong>-XX:+DisableExplicitGC**</strong>：<strong>当此参数打开时，在程序中调用System.gc()将会不起作用。默认是off。 </strong>-XX:+UseParNewGC<strong>**：</strong>设置年轻代为并行收集。可与CMS收集同时使用。 <strong>-XX:-CMSParallelRemarkEnabled**</strong>：<strong>在使用 UseParNewGC 的情况下 , 尽量减少 mark 的时间。 </strong>-XX:CMSInitiatingOccupancyFraction=70<strong>**：</strong>指示在 old generation 在使用了 70% 的比例后 , 启动 concurrent collector。 <strong>-XX:SoftRefLRUPolicyMSPerMB=0**</strong>：**每兆堆空闲空间中SoftReference的存活时间。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/05/06/java-vm-e5-8f-82-e6-95-b0-e9-85-8d-e7-bd-ae/" data-id="cjnibxghf006lgg0fajsu5dv8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-e5-a2-9e-e5-8a-a0-e9-9d-9e-e6-a0-87-e5-87-86-e7-ab-af-e5-8f-a3" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/28/linux-e5-a2-9e-e5-8a-a0-e9-9d-9e-e6-a0-87-e5-87-86-e7-ab-af-e5-8f-a3/" class="article-date">
  <time datetime="2015-04-28T02:52:11.000Z" itemprop="datePublished">2015-04-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/28/linux-e5-a2-9e-e5-8a-a0-e9-9d-9e-e6-a0-87-e5-87-86-e7-ab-af-e5-8f-a3/">linux 增加非标准端口</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>yum -y install policycoreutils-python semanage port -l|grep http #查看http开放端口 semanage port -a -t http_port_t -p tcp 888 #增加这个非标准端口即可 getsebool -a | grep httpd #setsebool httpd_can_network_connect 1 setsebool -P httpd_can_network_connect 1</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/28/linux-e5-a2-9e-e5-8a-a0-e9-9d-9e-e6-a0-87-e5-87-86-e7-ab-af-e5-8f-a3/" data-id="cjnibxghk006xgg0fp2dvls0x" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux-cp-e5-91-bd-e4-bb-a4-e7-9a-8415-e4-b8-aa-e7-a4-ba-e4-be-8b-e5-88-9b-e5-bb-ba-e6-96-87-e4-bb-b6-e5-92-8c-e7-9b-ae-e5-bd-95-e7-9a-84-e5-89-af-e6-9c-ac" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/23/linux-cp-e5-91-bd-e4-bb-a4-e7-9a-8415-e4-b8-aa-e7-a4-ba-e4-be-8b-e5-88-9b-e5-bb-ba-e6-96-87-e4-bb-b6-e5-92-8c-e7-9b-ae-e5-bd-95-e7-9a-84-e5-89-af-e6-9c-ac/" class="article-date">
  <time datetime="2015-04-22T17:44:23.000Z" itemprop="datePublished">2015-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/23/linux-cp-e5-91-bd-e4-bb-a4-e7-9a-8415-e4-b8-aa-e7-a4-ba-e4-be-8b-e5-88-9b-e5-bb-ba-e6-96-87-e4-bb-b6-e5-92-8c-e7-9b-ae-e5-bd-95-e7-9a-84-e5-89-af-e6-9c-ac/">Linux cp 命令的15个示例 - 创建文件和目录的副本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>拷贝文件和目录是每一个操作系统的基本指令。备份行为基本上是创建文件和目录的副本。在Linux系统下，我们可以用<strong>cp</strong>命令来实现。</p>
<h3 id="copy-命令是什么"><a href="#copy-命令是什么" class="headerlink" title="copy 命令是什么"></a>copy 命令是什么</h3><p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/134411r8in1vzsuppvz1wd.png" alt=""> 正如我们在上文提到的，<strong>cp</strong>是一个用来创建文件和目录副本的命令。在这里我们提供了一些在日常操作中可能用到的cp命令的实例。</p>
<h4 id="1-不带任何参数下，运行cp"><a href="#1-不带任何参数下，运行cp" class="headerlink" title="1. 不带任何参数下，运行cp"></a>1. 不带任何参数下，运行cp</h4><p>这是 cp 命令最基础的使用。 拷贝名为 myfile.txt 从一个位置到另一个位置，我们可以像这样子输入：</p>
<ol>
<li>$ cp myfile.txt /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_127.png" alt="Copy without options"> 如果我们没有输入绝对路径，这意味着我们正在当前目录下拷贝一个文件。在上面的实例中，<strong>myfile.txt</strong>位于<strong>/home/pungki/Documents</strong>目录下。如果我们当前目录正是<strong>/home/pungki/Documets</strong>,那么没有必要输入<strong>/home/pungki/Documents/myfile.txt</strong>来拷贝文件。当<strong>/home/pungki/office</strong>是一个目录，则文件会拷贝到里面。</p>
<h4 id="2-同时拷贝多个文件"><a href="#2-同时拷贝多个文件" class="headerlink" title="2. 同时拷贝多个文件"></a>2. 同时拷贝多个文件</h4><p>要在同时拷贝多个文件，我们只需要将多个文件用空格隔开。如下示例：</p>
<ol>
<li>$ cp file_1.txt file_2.txt file_3.txt /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_128.png" alt="Copying multiple files"></p>
<h4 id="3-拷贝一个目录"><a href="#3-拷贝一个目录" class="headerlink" title="3. 拷贝一个目录"></a>3. 拷贝一个目录</h4><p>要拷贝一个目录的话会有点棘手。你需要添加 <strong>-r</strong> 或者 <strong>-R</strong> 选项来实现。<strong>-r</strong>或<strong>-R</strong> 选项表明递归操作。无论该目录是否为空目录，<strong>这个选项都是必要的</strong>。如下示例：</p>
<ol>
<li>$ cp -r directory_1 /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_129.png" alt="Copy directory"> 需要注意的一件事，你需要<strong>移除在目录名尾部的斜杠</strong>。否则你会收到类似的错误信息<strong>cp: omitting directory‘directory_1/</strong>’ <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_130.png" alt="Copy directory error"> 如果你收到错误信息，则目录不会被拷贝到目标文件夹。</p>
<h4 id="4-创建文件的硬链接，而不是拷贝它们"><a href="#4-创建文件的硬链接，而不是拷贝它们" class="headerlink" title="4. 创建文件的硬链接，而不是拷贝它们"></a>4. 创建文件的硬链接，而不是拷贝它们</h4><p>拷贝文件意味着你必须使用一些存储空间来储存拷贝的文件。有时候出于某种原因，你可能想要创建“快捷方式”或者链接到文件，而不是拷贝它们。要做到这一点，我们可以使用<strong>-l</strong>选项。</p>
<ol>
<li>$ cp -l file_4.txt /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_131.png" alt="Copy hardlinks"> 从上图看出，我们看到<strong>file_4.txt</strong>的硬链接已经拷贝到<strong>/home/pungki/office/file_4.txt</strong>。标记有同样的 inode, <strong>835386</strong>。但是请注意，硬链接不能用来创建目录。下面让我们看一个例子。 _原目录 directory_1 的 inode 值是 278230_ <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_132.png" alt="Inode number of original directory"> _原文件 file_5.txt 的 inode 值是 279231_ <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_133.png" alt="Original inode number of file"> _对 directory_1 执行 cp 命令_ <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_134.png" alt="Copy using -rl options"> _拷贝的 directory_1副本的 inode 值是 274800_ <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_135.png" alt="Inode number of copied directory"> _拷贝的 file_5.txt副本的 inode 值是 279231。跟它的原文件一样_ <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_136.png" alt="Inode number of copied file"></p>
<h4 id="5-创建文件的符号链接"><a href="#5-创建文件的符号链接" class="headerlink" title="5. 创建文件的符号链接"></a>5. 创建文件的符号链接</h4><p>也有一种链接叫做 <strong>软链接</strong> 或 <strong>符号链接</strong>。我们用 <strong>-s</strong> 选项来实现。下面是命令的示例。</p>
<ol>
<li>$ cp -s /home/pungki/Documents/file_6.txt file_6.txt</li>
</ol>
<p>创建符号链接只能在当前目录下进行。在上面的截图中，我们想要创建符号链接 <strong>/home/pungki/office/file_6.txt 指向原文件 /home/pungki/Documents/file_6.txt</strong>。但是为了创建符号链接，<strong>我必须</strong>在将/home/pungki/office作为目标目录。一旦我设法进入目录，我就可以向上面一样运行 cp <strong>-s</strong> 命令。 现在你列出文件详情，你会看到<strong>/home/pungki/office/file_6.txt</strong>指向了原文件。在其文件名后标记了箭头符号。 <img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_137.png" alt="Symbolic links"></p>
<h4 id="6-不随符号链接拷贝原文件"><a href="#6-不随符号链接拷贝原文件" class="headerlink" title="6. 不随符号链接拷贝原文件"></a>6. 不随符号链接拷贝原文件</h4><p>[译注:意思是只拷贝符号链接文件] 我们可以用 <strong>-P</strong> 选项来实现。当对符号链接使用 cp 命令，它会照原样拷贝它自身。来看看下面的示例。</p>
<ol>
<li>$ cp -P file_6.txt ./movie</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_138.png" alt="Copy using -P option"> 如你所见，cp 命令照原样拷贝<strong>file_6.txt</strong>自身。文件类型仍然是一个符号链接。</p>
<h4 id="7-随符号链接拷贝原文件"><a href="#7-随符号链接拷贝原文件" class="headerlink" title="7. 随符号链接拷贝原文件"></a>7. 随符号链接拷贝原文件</h4><p>现在我们可以试一下<strong>-L</strong>选项。基本上，这个刚好与上面的 -P 选项 <strong>相反</strong>。下面是个示例：</p>
<ol>
<li>$ cp -L file_6.txt ./movie</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_139.png" alt="Copy using -L option"> 使用这个选项，拷贝的文件将会和<strong>file_6.txt</strong>原文件一样。我们可以从文件大小看出来。拷贝的文件有<strong>50 字节</strong>而当<strong>file_6.txt</strong>作为符号链接时文件大小只有<strong>33 字节</strong>。</p>
<h4 id="8-文件归档"><a href="#8-文件归档" class="headerlink" title="8. 文件归档"></a>8. 文件归档</h4><p>当我们去拷贝一个目录时，我们会用<strong>-r</strong>或者<strong>-R</strong>选项。但是我们也可以用<strong>-a</strong>选项来归档文件。这样会创建文件和目录的<strong>准确套录</strong>，如果有的话也可以包括符号链接。下面是示例：[译注：-a 会保留原文件或目录的属性]</p>
<ol>
<li>$ cp -a directory_1/ /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_140.png" alt="Copy using -a option"> 上列的命令会拷贝一个名为 directory_1 的目录到<strong>/home/pungki/office</strong>目录下。如你所见，<strong>file_6.txt</strong>依然作为符号链接被复制。</p>
<h4 id="9-显示正在做什么"><a href="#9-显示正在做什么" class="headerlink" title="9. 显示正在做什么"></a>9. 显示正在做什么</h4><p>默认情况下，当拷贝作业成功时，我们仅仅会再次看到命令提示符。如果你想了解在拷贝文件时都发生了什么，我们可以用 <strong>-v</strong> 选项。</p>
<ol>
<li>$ cp -v *.txt /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_141.png" alt="Verbose option"> 当我们从当前目录下拷贝所有的 txt 文件到 <strong>/home/pungki/office</strong> 目录，<strong>-v</strong>选项会显示正在操作的过程。这些额外的信息会帮助我们了解更多拷贝过程。</p>
<h4 id="10-当原文件较目标文件新时拷贝"><a href="#10-当原文件较目标文件新时拷贝" class="headerlink" title="10. 当原文件较目标文件新时拷贝"></a>10. 当原文件较目标文件新时拷贝</h4><p>我们用 <strong>-u</strong>选项来实现。下面是具体示例:</p>
<ol>
<li>$ cp -vu *.txt /home/pungki/office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_142.png" alt="Copy only if newer"> 起初我们看到<strong>file_1.txt 是0字节</strong>大小。然后我们用 vi 编辑，加入一些内容并保存。接下来，我们发现文件大小已经变为了 36 个字节。 与此同时在<strong>/home/pungki/office</strong>目录中，我们<strong>已经包含了所有</strong>txt文件。当我们用 -u 选项，结合 -v 选项来查看具体操作，cp 命令会只拷贝比目标目录下新的文件。因此，我们看到<strong>只有 file_1.txt 拷贝到 /home/pungki/office 目录下</strong>。</p>
<h4 id="11-使用交互模式"><a href="#11-使用交互模式" class="headerlink" title="11. 使用交互模式"></a>11. 使用交互模式</h4><p>交互模式下会询问是否覆盖目标目录下的文件。使用 <strong>-i</strong> 选项，启用交互模式。</p>
<ol>
<li>$ cp -ir directory_1/ /home/pungki/office/</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_143.png" alt="Interactive mode"></p>
<h4 id="12-创建备份文件"><a href="#12-创建备份文件" class="headerlink" title="12. 创建备份文件"></a>12. 创建备份文件</h4><p>当目标目录已经含有同名文件，默认情况下 cp 命令会覆盖目标目录下的同名文件。使用 <strong>–backup</strong> 选项，cp 命令会为每一个现有的目标文件做一个备份。../office 相对于 /home/pungki/office 。下面是示例：</p>
<ol>
<li>$ cp –backup=simple -v *.txt ../office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_144.png" alt="Backup option"> 正如我们看到的，<strong>–backup=simple</strong> 选项会创建一个在文件名末尾用波浪符标记(~)的备份文件。<strong>–backup</strong> 选项也有一些其他控制：</p>
<ul>
<li><strong>none, off</strong>:从不备份(即使给出 –backup)</li>
<li><strong>numbered, t</strong>:用编号备份</li>
<li><strong>existing, nil</strong> :如果编号备份存在则使用编号备份，否者用简易备份[译注：也就是用波浪号]</li>
<li><strong>simple, never</strong> :总是使用简易备份</li>
</ul>
<h4 id="13-只拷贝文件属性"><a href="#13-只拷贝文件属性" class="headerlink" title="13. 只拷贝文件属性"></a>13. 只拷贝文件属性</h4><p>cp 命令也提供给我们 <strong>–attributes-only</strong> 选项。顾名思义，这个选项只会拷贝文件名及其属性，不会拷贝任何数据。下面是示例：</p>
<ol>
<li>$ cp –attributes-only file_6.txt -v ../office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_145.png" alt="Copy attributes only"> 从上图看出， <strong>原文件 file_6.txt 有 50 字节</strong>大小。用了 <strong>–attributes-only</strong>选项，<strong>拷贝的文件只有0字节</strong>大小。这是因为文件内容并没有拷贝。</p>
<h4 id="14-强制拷贝"><a href="#14-强制拷贝" class="headerlink" title="14. 强制拷贝"></a>14. 强制拷贝</h4><p>用了 <strong>-f</strong> 选项会强制进行拷贝操作。如果目标文件不能打开，可以用 <strong>-f</strong> 尝试一下。</p>
<ol>
<li>$ cp -f *.txt -v ../office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_146.png" alt="Copy with force"></p>
<h4 id="15-在拷贝之前先删除目标"><a href="#15-在拷贝之前先删除目标" class="headerlink" title="15. 在拷贝之前先删除目标"></a>15. 在拷贝之前先删除目标</h4><p>我们可以用，<strong>–remove-destination 选项</strong> 实现。这个选项与上面的<strong>-f选项形成对照</strong>。如果 cp 命令在目标目录下发现同名文件， cp 命令会先删除目标文件，然后再拷贝一份新的。下面是示例：</p>
<ol>
<li>$ cp –remove-destination *.txt -v ../office</li>
</ol>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/daahe.com_147.png" alt="Remove destination option"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>cp 命令是 Linux 下最基础的命令之一。对于那些想要学习 Linux 的人，必须得把这个命令掌握。当然你也可以在你的终端下键入<strong>man cp</strong> 或者 <strong>cp –help</strong> 来显示更多帮助信息。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/23/linux-cp-e5-91-bd-e4-bb-a4-e7-9a-8415-e4-b8-aa-e7-a4-ba-e4-be-8b-e5-88-9b-e5-bb-ba-e6-96-87-e4-bb-b6-e5-92-8c-e7-9b-ae-e5-bd-95-e7-9a-84-e5-89-af-e6-9c-ac/" data-id="cjnibxgj5009lgg0feas689xo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e9-98-b2-e5-be-a1-e6-9a-b4-e5-8a-9b-e7-a0-b4-e8-a7-a3ssh-e6-94-bb-e5-87-bb" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/22/e9-98-b2-e5-be-a1-e6-9a-b4-e5-8a-9b-e7-a0-b4-e8-a7-a3ssh-e6-94-bb-e5-87-bb/" class="article-date">
  <time datetime="2015-04-21T23:34:47.000Z" itemprop="datePublished">2015-04-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/22/e9-98-b2-e5-be-a1-e6-9a-b4-e5-8a-9b-e7-a0-b4-e8-a7-a3ssh-e6-94-bb-e5-87-bb/">防御暴力破解SSH攻击</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>托管在IDC的机器我们通常都用SSH方式来远程管理.但是经常可以发现log-watch的日志中有大量试探登录的</p>
<p>信息,为了我们的主机安全,有必要想个方法来阻挡这些可恨的”HACKER”</p>
<p>有很多办法来阻挡这些密码尝试 1 修改端口 2 健壮的密码 3 RSA公钥认证 4 使用iptables脚本 5 使用sshd日志过滤 6 使用tcp_wrappers过滤 7 使用knockd</p>
<p>1 vi /etc/ssh/sshd_config #Port 22 默认端口为22,为了避免被扫描,去掉#,改成一个其他的端口,比如45632 保存后重启sshd服务.service sshd restart</p>
<p>2没什么可说的,密码的复杂性可以增加破解的难度,大小写混合加上数字并且有足够的密码长度就比较安全</p>
<p>了,唯一的问题就是要牢记密码.</p>
<p>3.默认的登录方式是password,如果需要用RSA公钥登录,需要先创建RSA Key #ssh-keygen -t rsa -b 1024 会生成私钥/home/username/.ssh/id_rsa 同时生成公钥/home/username/.ssh/id_rsa.pub 输入一个加密短语(也可省略)</p>
<p>修改sshd 设置,编辑/etc/ssh/sshd_config ‘PasswordAuthentication no’ RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile      .ssh/id_rsa.pub 将公钥下载到本地计算机,然后在ssh客户端软件Secure CRT中设置好,就可以登录了</p>
<p>4 iptbles脚本 此脚本允许每分钟3个连接.有白名单,并有日志纪录</p>
<p>iptables -A INPUT -p tcp –dport 22 -m state –state NEW -m recent –set  –name SSH iptables -A INPUT -p tcp –dport 22 -m state –state NEW -j SSH_WHITELIST iptables -A INPUT -p tcp –dport 22 -m state –state NEW -m recent –update  –seconds 60 –</p>
<p>hitcount 4 –rttl –name SSH -j ULOG –ulog-prefix SSH_brute_force iptables -A INPUT -p tcp –dport 22 -m state –state NEW -m recent –update  –seconds 60 –</p>
<p>hitcount 4 –rttl –name SSH -j DROP iptables的版本需要&gt;1.2.11 (1.2不支持 –rttl参数)</p>
<p>5使用sshd日志过滤 有几个软件(脚本)可以做到. sshfilter <a href="http://www.csc.liv.ac.uk/~greg/sshdfilter/" target="_blank" rel="noopener">[url]http://www.csc.liv.ac.uk/~greg/sshdfilter/[/url]</a> Fail2Ban  <a href="http://fail2ban.sourceforge.net/" target="_blank" rel="noopener">[url]http://fail2ban.sourceforge.net/[/url]</a> DenyHosts <a href="http://denyhosts.sourceforge.net/" target="_blank" rel="noopener">[url]http://denyhosts.sourceforge.net/[/url]</a></p>
<p>需要sshd支持tcp_wrappers此功能. [root@as4test include]# ldd /usr/sbin/sshd | grep libwrap libwrap.so.0 =&gt; /usr/lib64/libwrap.so.0 (0x0000002a9566c000) 如果有libwrap.so.0这个库说明支持此功能 另一种测试方法:在/etc/hosts.deny加入一行127.0.0.1 然后ssh localhost,如果无法连接,说明支持.</p>
<p>$ tar zxvf DenyHosts-2.6.tar.gz</p>
<p>$ cd DenyHosts-2.6</p>
<p>as root:</p>
<p># python setup.py install</p>
<p>#cd /usr/share/denyhost</p>
<p># cp denyhosts.cfg-dist denyhosts.cfg 配置文件 # cp daemon-control-dist daemon-control 启动脚本 # chown root daemon-control</p>
<p># chmod 700 daemon-control</p>
<p># cd /etc/init.d</p>
<p># ln -s /usr/share/denyhosts/daemon-control denyhosts</p>
<p># chkconfig –add denyhosts 添加到开机启动服务中</p>
<p>6 使用tcp_wrappers过滤 1 下载脚本<a href="http://www.la-samhna.de/misc/sshblock.sh" target="_blank" rel="noopener">[url]http://www.la-samhna.de/misc/sshblock.sh[/url]</a> 2 设置可执行权限 chmod 755 /usr/local/bin/sshblock.sh 3 在/etc/hosts.allow中添加以下内容 #__START_SSHBLOCK__ #__END_SSHBLOCK__ sshd : ALL : spawn (/usr/local/bin/sshblock.sh %a)&amp; 设置 DONTBLOCK 白名单 BURST_MAX=5 BURST_TIM=60 60秒内登录5次就封锁 PURGE_TIM=3600 3600秒后解冻</p>
<p>7  使用KNOCKD knockd 监视一个预定义模式在iptables的日志,例如一次击中端口6356,一次击中端口63356,两次击中端口</p>
<p>9356,这相当于敲一个关闭的门用一种特殊的暗码来被konckd识别,konckd 将使用iptables来打开一个预定</p>
<p>义端口例如ssh的22端口在一个预定定义时间.(比如一分钟),如果一个ssh session 在这个时间范围内打开,</p>
<p>这个端口会一直保留.直到预定义时间过期后ssh端口被knockd关掉.</p>
<p>缺点:比较复杂的方案,不适合普通人 需要客户端(knockd-client)来实现port knocking”,同时需要knockd-server来响应. 实际上,很容易检测到这种通讯模式,一旦攻击者可以监控你的通讯,这种解决方案无法提供安全防护针对本</p>
<p>地攻击者.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/22/e9-98-b2-e5-be-a1-e6-9a-b4-e5-8a-9b-e7-a0-b4-e8-a7-a3ssh-e6-94-bb-e5-87-bb/" data-id="cjnibxggz0058gg0f6roalxw8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-1098" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/21/1098/" class="article-date">
  <time datetime="2015-04-21T00:49:56.000Z" itemprop="datePublished">2015-04-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/21/1098/">编译nginx 模块</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>./configure –with-http_stub_status_module –prefix=/usr/local/nginx –with-pcre=/home/nginx/tools/pcre-8.36 –add-module=/home/nginx/tools/nginx_upstream_jvm_route –add-module=/home/nginx/tools/nginx_ajp_model –user=nginx –group=nginx yum install gcc yum install -y zlib-devel yum install -y gcc gcc-c++</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/21/1098/" data-id="cjnibxged000agg0f4j1py9p0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-android-sdkversion-e5-8f-82-e6-95-b0-e5-88-97-e8-a1-a8" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/20/android-sdkversion-e5-8f-82-e6-95-b0-e5-88-97-e8-a1-a8/" class="article-date">
  <time datetime="2015-04-20T01:39:26.000Z" itemprop="datePublished">2015-04-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/20/android-sdkversion-e5-8f-82-e6-95-b0-e5-88-97-e8-a1-a8/">Android SDKVersion 参数列表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Platform Version</p>
<p>API Level</p>
<p>VERSION_CODE</p>
<p>Notes</p>
<p><a href="http://developer.android.com/about/versions/android-4.4.html" target="_blank" rel="noopener">Android 4.4</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/19/changes.html" title="Diff Report" target="_blank" rel="noopener">19</a></p>
<p><code>[KITKAT](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#KITKAT)</code></p>
<p><a href="http://developer.android.com/about/versions/kitkat.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-4.3.html" target="_blank" rel="noopener">Android 4.3</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/18/changes.html" title="Diff Report" target="_blank" rel="noopener">18</a></p>
<p><code>[JELLY_BEAN_MR2](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#JELLY_BEAN_MR2)</code></p>
<p><a href="http://developer.android.com/about/versions/jelly-bean.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-4.2.html" target="_blank" rel="noopener">Android 4.2, 4.2.2</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/17/changes.html" title="Diff Report" target="_blank" rel="noopener">17</a></p>
<p><code>[JELLY_BEAN_MR1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#JELLY_BEAN_MR1)</code></p>
<p><a href="http://developer.android.com/about/versions/jelly-bean.html#android-42" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-4.1.html" target="_blank" rel="noopener">Android 4.1, 4.1.1</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/16/changes.html" title="Diff Report" target="_blank" rel="noopener">16</a></p>
<p><code>[JELLY_BEAN](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#JELLY_BEAN)</code></p>
<p><a href="http://developer.android.com/about/versions/jelly-bean.html#android-41" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-4.0.3.html" target="_blank" rel="noopener">Android 4.0.3, 4.0.4</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/15/changes.html" title="Diff Report" target="_blank" rel="noopener">15</a></p>
<p><code>[ICE_CREAM_SANDWICH_MR1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#ICE_CREAM_SANDWICH_MR1)</code></p>
<p><a href="http://developer.android.com/about/versions/android-4.0-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-4.0.html" target="_blank" rel="noopener">Android 4.0, 4.0.1, 4.0.2</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/14/changes.html" title="Diff Report" target="_blank" rel="noopener">14</a></p>
<p><code>[ICE_CREAM_SANDWICH](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#ICE_CREAM_SANDWICH)</code></p>
<p><a href="http://developer.android.com/about/versions/android-3.2.html" target="_blank" rel="noopener">Android 3.2</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/13/changes.html" title="Diff Report" target="_blank" rel="noopener">13</a></p>
<p><code>[HONEYCOMB_MR2](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#HONEYCOMB_MR2)</code></p>
<p><a href="http://developer.android.com/about/versions/android-3.1.html" target="_blank" rel="noopener">Android 3.1.x</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/12/changes.html" title="Diff Report" target="_blank" rel="noopener">12</a></p>
<p><code>[HONEYCOMB_MR1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#HONEYCOMB_MR1)</code></p>
<p><a href="http://developer.android.com/about/versions/android-3.1-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-3.0.html" target="_blank" rel="noopener">Android 3.0.x</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/11/changes.html" title="Diff Report" target="_blank" rel="noopener">11</a></p>
<p><code>[HONEYCOMB](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#HONEYCOMB)</code></p>
<p><a href="http://developer.android.com/about/versions/android-3.0-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-2.3.3.html" target="_blank" rel="noopener">Android 2.3.4 Android 2.3.3</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/10/changes.html" title="Diff Report" target="_blank" rel="noopener">10</a></p>
<p><code>[GINGERBREAD_MR1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#GINGERBREAD_MR1)</code></p>
<p><a href="http://developer.android.com/about/versions/android-2.3-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-2.3.html" target="_blank" rel="noopener">Android 2.3.2 Android 2.3.1 Android 2.3</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/9/changes.html" title="Diff Report" target="_blank" rel="noopener">9</a></p>
<p><code>[GINGERBREAD](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#GINGERBREAD)</code></p>
<p><a href="http://developer.android.com/about/versions/android-2.2.html" target="_blank" rel="noopener">Android 2.2.x</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/8/changes.html" title="Diff Report" target="_blank" rel="noopener">8</a></p>
<p><code>[FROYO](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#FROYO)</code></p>
<p><a href="http://developer.android.com/about/versions/android-2.2-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-2.1.html" target="_blank" rel="noopener">Android 2.1.x</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/7/changes.html" title="Diff Report" target="_blank" rel="noopener">7</a></p>
<p><code>[ECLAIR_MR1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#ECLAIR_MR1)</code></p>
<p><a href="http://developer.android.com/about/versions/android-2.0-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-2.0.1.html" target="_blank" rel="noopener">Android 2.0.1</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/6/changes.html" title="Diff Report" target="_blank" rel="noopener">6</a></p>
<p><code>[ECLAIR_0_1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#ECLAIR_0_1)</code></p>
<p><a href="http://developer.android.com/about/versions/android-2.0.html" target="_blank" rel="noopener">Android 2.0</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/5/changes.html" title="Diff Report" target="_blank" rel="noopener">5</a></p>
<p><code>[ECLAIR](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#ECLAIR)</code></p>
<p><a href="http://developer.android.com/about/versions/android-1.6.html" target="_blank" rel="noopener">Android 1.6</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/4/changes.html" title="Diff Report" target="_blank" rel="noopener">4</a></p>
<p><code>[DONUT](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#DONUT)</code></p>
<p><a href="http://developer.android.com/about/versions/android-1.6-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-1.5.html" target="_blank" rel="noopener">Android 1.5</a></p>
<p><a href="http://developer.android.com/sdk/api_diff/3/changes.html" title="Diff Report" target="_blank" rel="noopener">3</a></p>
<p><code>[CUPCAKE](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#CUPCAKE)</code></p>
<p><a href="http://developer.android.com/about/versions/android-1.5-highlights.html" target="_blank" rel="noopener">Platform Highlights</a></p>
<p><a href="http://developer.android.com/about/versions/android-1.1.html" target="_blank" rel="noopener">Android 1.1</a></p>
<p>2</p>
<p><code>[BASE_1_1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#BASE_1_1)</code></p>
<p>Android 1.0</p>
<p>1</p>
<p><code>`[BASE](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#BASE)`</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/20/android-sdkversion-e5-8f-82-e6-95-b0-e5-88-97-e8-a1-a8/" data-id="cjnibxgf3001qgg0f3wixwnog" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e5-b8-b8-e7-94-a8-e6-96-87-e4-bb-b6-e5-90-8e-e7-bc-80-e4-b8-8econtent-type-e5-af-b9-e7-85-a7-e8-a1-a8" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/18/e5-b8-b8-e7-94-a8-e6-96-87-e4-bb-b6-e5-90-8e-e7-bc-80-e4-b8-8econtent-type-e5-af-b9-e7-85-a7-e8-a1-a8/" class="article-date">
  <time datetime="2015-04-17T19:20:46.000Z" itemprop="datePublished">2015-04-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/18/e5-b8-b8-e7-94-a8-e6-96-87-e4-bb-b6-e5-90-8e-e7-bc-80-e4-b8-8econtent-type-e5-af-b9-e7-85-a7-e8-a1-a8/">常用文件后缀与Content-Type对照表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>文件扩展名</p>
<p>Content-Type(Mime-Type)</p>
<p>文件扩展名</p>
<p>Content-Type(Mime-Type)</p>
<p>.*（ 二进制流，不知道下载文件类型）</p>
<p>application/octet-stream</p>
<p>.tif</p>
<p>image/tiff</p>
<p>.001</p>
<p>application/x-001</p>
<p>.301</p>
<p>application/x-301</p>
<p>.323</p>
<p>text/h323</p>
<p>.906</p>
<p>application/x-906</p>
<p>.907</p>
<p>drawing/907</p>
<p>.a11</p>
<p>application/x-a11</p>
<p>.acp</p>
<p>audio/x-mei-aac</p>
<p>.ai</p>
<p>application/postscript</p>
<p>.aif</p>
<p>audio/aiff</p>
<p>.aifc</p>
<p>audio/aiff</p>
<p>.aiff</p>
<p>audio/aiff</p>
<p>.anv</p>
<p>application/x-anv</p>
<p>.asa</p>
<p>text/asa</p>
<p>.asf</p>
<p>video/x-ms-asf</p>
<p>.asp</p>
<p>text/asp</p>
<p>.asx</p>
<p>video/x-ms-asf</p>
<p>.au</p>
<p>audio/basic</p>
<p>.avi</p>
<p>video/avi</p>
<p>.awf</p>
<p>application/vnd.adobe.workflow</p>
<p>.biz</p>
<p>text/xml</p>
<p>.bmp</p>
<p>application/x-bmp</p>
<p>.bot</p>
<p>application/x-bot</p>
<p>.c4t</p>
<p>application/x-c4t</p>
<p>.c90</p>
<p>application/x-c90</p>
<p>.cal</p>
<p>application/x-cals</p>
<p>.cat</p>
<p>application/vnd.ms-pki.seccat</p>
<p>.cdf</p>
<p>application/x-netcdf</p>
<p>.cdr</p>
<p>application/x-cdr</p>
<p>.cel</p>
<p>application/x-cel</p>
<p>.cer</p>
<p>application/x-x509-ca-cert</p>
<p>.cg4</p>
<p>application/x-g4</p>
<p>.cgm</p>
<p>application/x-cgm</p>
<p>.cit</p>
<p>application/x-cit</p>
<p>.class</p>
<p>java/*</p>
<p>.cml</p>
<p>text/xml</p>
<p>.cmp</p>
<p>application/x-cmp</p>
<p>.cmx</p>
<p>application/x-cmx</p>
<p>.cot</p>
<p>application/x-cot</p>
<p>.crl</p>
<p>application/pkix-crl</p>
<p>.crt</p>
<p>application/x-x509-ca-cert</p>
<p>.csi</p>
<p>application/x-csi</p>
<p>.css</p>
<p>text/css</p>
<p>.cut</p>
<p>application/x-cut</p>
<p>.dbf</p>
<p>application/x-dbf</p>
<p>.dbm</p>
<p>application/x-dbm</p>
<p>.dbx</p>
<p>application/x-dbx</p>
<p>.dcd</p>
<p>text/xml</p>
<p>.dcx</p>
<p>application/x-dcx</p>
<p>.der</p>
<p>application/x-x509-ca-cert</p>
<p>.dgn</p>
<p>application/x-dgn</p>
<p>.dib</p>
<p>application/x-dib</p>
<p>.dll</p>
<p>application/x-msdownload</p>
<p>.doc</p>
<p>application/msword</p>
<p>.dot</p>
<p>application/msword</p>
<p>.drw</p>
<p>application/x-drw</p>
<p>.dtd</p>
<p>text/xml</p>
<p>.dwf</p>
<p>Model/vnd.dwf</p>
<p>.dwf</p>
<p>application/x-dwf</p>
<p>.dwg</p>
<p>application/x-dwg</p>
<p>.dxb</p>
<p>application/x-dxb</p>
<p>.dxf</p>
<p>application/x-dxf</p>
<p>.edn</p>
<p>application/vnd.adobe.edn</p>
<p>.emf</p>
<p>application/x-emf</p>
<p>.eml</p>
<p>message/rfc822</p>
<p>.ent</p>
<p>text/xml</p>
<p>.epi</p>
<p>application/x-epi</p>
<p>.eps</p>
<p>application/x-ps</p>
<p>.eps</p>
<p>application/postscript</p>
<p>.etd</p>
<p>application/x-ebx</p>
<p>.exe</p>
<p>application/x-msdownload</p>
<p>.fax</p>
<p>image/fax</p>
<p>.fdf</p>
<p>application/vnd.fdf</p>
<p>.fif</p>
<p>application/fractals</p>
<p>.fo</p>
<p>text/xml</p>
<p>.frm</p>
<p>application/x-frm</p>
<p>.g4</p>
<p>application/x-g4</p>
<p>.gbr</p>
<p>application/x-gbr</p>
<p>.</p>
<p>application/x-</p>
<p>.gif</p>
<p>image/gif</p>
<p>.gl2</p>
<p>application/x-gl2</p>
<p>.gp4</p>
<p>application/x-gp4</p>
<p>.hgl</p>
<p>application/x-hgl</p>
<p>.hmr</p>
<p>application/x-hmr</p>
<p>.hpg</p>
<p>application/x-hpgl</p>
<p>.hpl</p>
<p>application/x-hpl</p>
<p>.hqx</p>
<p>application/mac-binhex40</p>
<p>.hrf</p>
<p>application/x-hrf</p>
<p>.hta</p>
<p>application/hta</p>
<p>.htc</p>
<p>text/x-component</p>
<p>.htm</p>
<p>text/html</p>
<p>.html</p>
<p>text/html</p>
<p>.htt</p>
<p>text/webviewhtml</p>
<p>.htx</p>
<p>text/html</p>
<p>.icb</p>
<p>application/x-icb</p>
<p>.ico</p>
<p>image/x-icon</p>
<p>.ico</p>
<p>application/x-ico</p>
<p>.iff</p>
<p>application/x-iff</p>
<p>.ig4</p>
<p>application/x-g4</p>
<p>.igs</p>
<p>application/x-igs</p>
<p>.iii</p>
<p>application/x-iphone</p>
<p>.img</p>
<p>application/x-img</p>
<p>.ins</p>
<p>application/x-internet-signup</p>
<p>.isp</p>
<p>application/x-internet-signup</p>
<p>.IVF</p>
<p>video/x-ivf</p>
<p>.java</p>
<p>java/*</p>
<p>.jfif</p>
<p>image/jpeg</p>
<p>.jpe</p>
<p>image/jpeg</p>
<p>.jpe</p>
<p>application/x-jpe</p>
<p>.jpeg</p>
<p>image/jpeg</p>
<p>.jpg</p>
<p>image/jpeg</p>
<p>.jpg</p>
<p>application/x-jpg</p>
<p>.js</p>
<p>application/x-javascript</p>
<p>.jsp</p>
<p>text/html</p>
<p>.la1</p>
<p>audio/x-liquid-file</p>
<p>.lar</p>
<p>application/x-laplayer-reg</p>
<p>.latex</p>
<p>application/x-latex</p>
<p>.lavs</p>
<p>audio/x-liquid-secure</p>
<p>.lbm</p>
<p>application/x-lbm</p>
<p>.lmsff</p>
<p>audio/x-la-lms</p>
<p>.ls</p>
<p>application/x-javascript</p>
<p>.ltr</p>
<p>application/x-ltr</p>
<p>.m1v</p>
<p>video/x-mpeg</p>
<p>.m2v</p>
<p>video/x-mpeg</p>
<p>.m3u</p>
<p>audio/mpegurl</p>
<p>.m4e</p>
<p>video/mpeg4</p>
<p>.mac</p>
<p>application/x-mac</p>
<p>.man</p>
<p>application/x-troff-man</p>
<p>.math</p>
<p>text/xml</p>
<p>.mdb</p>
<p>application/msaccess</p>
<p>.mdb</p>
<p>application/x-mdb</p>
<p>.mfp</p>
<p>application/x-shockwave-flash</p>
<p>.mht</p>
<p>message/rfc822</p>
<p>.mhtml</p>
<p>message/rfc822</p>
<p>.mi</p>
<p>application/x-mi</p>
<p>.mid</p>
<p>audio/mid</p>
<p>.midi</p>
<p>audio/mid</p>
<p>.mil</p>
<p>application/x-mil</p>
<p>.mml</p>
<p>text/xml</p>
<p>.mnd</p>
<p>audio/x-musicnet-download</p>
<p>.mns</p>
<p>audio/x-musicnet-stream</p>
<p>.mocha</p>
<p>application/x-javascript</p>
<p>.movie</p>
<p>video/x-sgi-movie</p>
<p>.mp1</p>
<p>audio/mp1</p>
<p>.mp2</p>
<p>audio/mp2</p>
<p>.mp2v</p>
<p>video/mpeg</p>
<p>.mp3</p>
<p>audio/mp3</p>
<p>.mp4</p>
<p>video/mpeg4</p>
<p>.mpa</p>
<p>video/x-mpg</p>
<p>.mpd</p>
<p>application/vnd.ms-project</p>
<p>.mpe</p>
<p>video/x-mpeg</p>
<p>.mpeg</p>
<p>video/mpg</p>
<p>.mpg</p>
<p>video/mpg</p>
<p>.mpga</p>
<p>audio/rn-mpeg</p>
<p>.mpp</p>
<p>application/vnd.ms-project</p>
<p>.mps</p>
<p>video/x-mpeg</p>
<p>.mpt</p>
<p>application/vnd.ms-project</p>
<p>.mpv</p>
<p>video/mpg</p>
<p>.mpv2</p>
<p>video/mpeg</p>
<p>.mpw</p>
<p>application/vnd.ms-project</p>
<p>.mpx</p>
<p>application/vnd.ms-project</p>
<p>.mtx</p>
<p>text/xml</p>
<p>.mxp</p>
<p>application/x-mmxp</p>
<p>.net</p>
<p>image/pnetvue</p>
<p>.nrf</p>
<p>application/x-nrf</p>
<p>.nws</p>
<p>message/rfc822</p>
<p>.odc</p>
<p>text/x-ms-odc</p>
<p>.out</p>
<p>application/x-out</p>
<p>.p10</p>
<p>application/pkcs10</p>
<p>.p12</p>
<p>application/x-pkcs12</p>
<p>.p7b</p>
<p>application/x-pkcs7-certificates</p>
<p>.p7c</p>
<p>application/pkcs7-mime</p>
<p>.p7m</p>
<p>application/pkcs7-mime</p>
<p>.p7r</p>
<p>application/x-pkcs7-certreqresp</p>
<p>.p7s</p>
<p>application/pkcs7-signature</p>
<p>.pc5</p>
<p>application/x-pc5</p>
<p>.pci</p>
<p>application/x-pci</p>
<p>.pcl</p>
<p>application/x-pcl</p>
<p>.pcx</p>
<p>application/x-pcx</p>
<p>.pdf</p>
<p>application/pdf</p>
<p>.pdf</p>
<p>application/pdf</p>
<p>.pdx</p>
<p>application/vnd.adobe.pdx</p>
<p>.pfx</p>
<p>application/x-pkcs12</p>
<p>.pgl</p>
<p>application/x-pgl</p>
<p>.pic</p>
<p>application/x-pic</p>
<p>.pko</p>
<p>application/vnd.ms-pki.pko</p>
<p>.pl</p>
<p>application/x-perl</p>
<p>.plg</p>
<p>text/html</p>
<p>.pls</p>
<p>audio/scpls</p>
<p>.plt</p>
<p>application/x-plt</p>
<p>.png</p>
<p>image/png</p>
<p>.png</p>
<p>application/x-png</p>
<p>.pot</p>
<p>application/vnd.ms-powerpoint</p>
<p>.ppa</p>
<p>application/vnd.ms-powerpoint</p>
<p>.ppm</p>
<p>application/x-ppm</p>
<p>.pps</p>
<p>application/vnd.ms-powerpoint</p>
<p>.ppt</p>
<p>application/vnd.ms-powerpoint</p>
<p>.ppt</p>
<p>application/x-ppt</p>
<p>.pr</p>
<p>application/x-pr</p>
<p>.prf</p>
<p>application/pics-rules</p>
<p>.prn</p>
<p>application/x-prn</p>
<p>.prt</p>
<p>application/x-prt</p>
<p>.ps</p>
<p>application/x-ps</p>
<p>.ps</p>
<p>application/postscript</p>
<p>.ptn</p>
<p>application/x-ptn</p>
<p>.pwz</p>
<p>application/vnd.ms-powerpoint</p>
<p>.r3t</p>
<p>text/vnd.rn-realtext3d</p>
<p>.ra</p>
<p>audio/vnd.rn-realaudio</p>
<p>.ram</p>
<p>audio/x-pn-realaudio</p>
<p>.ras</p>
<p>application/x-ras</p>
<p>.rat</p>
<p>application/rat-file</p>
<p>.rdf</p>
<p>text/xml</p>
<p>.rec</p>
<p>application/vnd.rn-recording</p>
<p>.red</p>
<p>application/x-red</p>
<p>.rgb</p>
<p>application/x-rgb</p>
<p>.rjs</p>
<p>application/vnd.rn-realsystem-rjs</p>
<p>.rjt</p>
<p>application/vnd.rn-realsystem-rjt</p>
<p>.rlc</p>
<p>application/x-rlc</p>
<p>.rle</p>
<p>application/x-rle</p>
<p>.rm</p>
<p>application/vnd.rn-realmedia</p>
<p>.rmf</p>
<p>application/vnd.adobe.rmf</p>
<p>.rmi</p>
<p>audio/mid</p>
<p>.rmj</p>
<p>application/vnd.rn-realsystem-rmj</p>
<p>.rmm</p>
<p>audio/x-pn-realaudio</p>
<p>.rmp</p>
<p>application/vnd.rn-rn_music_package</p>
<p>.rms</p>
<p>application/vnd.rn-realmedia-secure</p>
<p>.rmvb</p>
<p>application/vnd.rn-realmedia-vbr</p>
<p>.rmx</p>
<p>application/vnd.rn-realsystem-rmx</p>
<p>.rnx</p>
<p>application/vnd.rn-realplayer</p>
<p>.rp</p>
<p>image/vnd.rn-realpix</p>
<p>.rpm</p>
<p>audio/x-pn-realaudio-plugin</p>
<p>.rsml</p>
<p>application/vnd.rn-rsml</p>
<p>.rt</p>
<p>text/vnd.rn-realtext</p>
<p>.rtf</p>
<p>application/msword</p>
<p>.rtf</p>
<p>application/x-rtf</p>
<p>.rv</p>
<p>video/vnd.rn-realvideo</p>
<p>.sam</p>
<p>application/x-sam</p>
<p>.sat</p>
<p>application/x-sat</p>
<p>.sdp</p>
<p>application/sdp</p>
<p>.sdw</p>
<p>application/x-sdw</p>
<p>.sit</p>
<p>application/x-stuffit</p>
<p>.slb</p>
<p>application/x-slb</p>
<p>.sld</p>
<p>application/x-sld</p>
<p>.slk</p>
<p>drawing/x-slk</p>
<p>.smi</p>
<p>application/smil</p>
<p>.smil</p>
<p>application/smil</p>
<p>.smk</p>
<p>application/x-smk</p>
<p>.snd</p>
<p>audio/basic</p>
<p>.sol</p>
<p>text/plain</p>
<p>.sor</p>
<p>text/plain</p>
<p>.spc</p>
<p>application/x-pkcs7-certificates</p>
<p>.spl</p>
<p>application/futuresplash</p>
<p>.spp</p>
<p>text/xml</p>
<p>.ssm</p>
<p>application/streamingmedia</p>
<p>.sst</p>
<p>application/vnd.ms-pki.certstore</p>
<p>.stl</p>
<p>application/vnd.ms-pki.stl</p>
<p>.stm</p>
<p>text/html</p>
<p>.sty</p>
<p>application/x-sty</p>
<p>.svg</p>
<p>text/xml</p>
<p>.swf</p>
<p>application/x-shockwave-flash</p>
<p>.tdf</p>
<p>application/x-tdf</p>
<p>.tg4</p>
<p>application/x-tg4</p>
<p>.tga</p>
<p>application/x-tga</p>
<p>.tif</p>
<p>image/tiff</p>
<p>.tif</p>
<p>application/x-tif</p>
<p>.tiff</p>
<p>image/tiff</p>
<p>.tld</p>
<p>text/xml</p>
<p>.top</p>
<p>drawing/x-top</p>
<p>.torrent</p>
<p>application/x-bittorrent</p>
<p>.tsd</p>
<p>text/xml</p>
<p>.txt</p>
<p>text/plain</p>
<p>.uin</p>
<p>application/x-icq</p>
<p>.uls</p>
<p>text/iuls</p>
<p>.vcf</p>
<p>text/x-vcard</p>
<p>.vda</p>
<p>application/x-vda</p>
<p>.vdx</p>
<p>application/vnd.visio</p>
<p>.vml</p>
<p>text/xml</p>
<p>.vpg</p>
<p>application/x-vpeg005</p>
<p>.vsd</p>
<p>application/vnd.visio</p>
<p>.vsd</p>
<p>application/x-vsd</p>
<p>.vss</p>
<p>application/vnd.visio</p>
<p>.vst</p>
<p>application/vnd.visio</p>
<p>.vst</p>
<p>application/x-vst</p>
<p>.vsw</p>
<p>application/vnd.visio</p>
<p>.vsx</p>
<p>application/vnd.visio</p>
<p>.vtx</p>
<p>application/vnd.visio</p>
<p>.vxml</p>
<p>text/xml</p>
<p>.wav</p>
<p>audio/wav</p>
<p>.wax</p>
<p>audio/x-ms-wax</p>
<p>.wb1</p>
<p>application/x-wb1</p>
<p>.wb2</p>
<p>application/x-wb2</p>
<p>.wb3</p>
<p>application/x-wb3</p>
<p>.wbmp</p>
<p>image/vnd.wap.wbmp</p>
<p>.wiz</p>
<p>application/msword</p>
<p>.wk3</p>
<p>application/x-wk3</p>
<p>.wk4</p>
<p>application/x-wk4</p>
<p>.wkq</p>
<p>application/x-wkq</p>
<p>.wks</p>
<p>application/x-wks</p>
<p>.wm</p>
<p>video/x-ms-wm</p>
<p>.wma</p>
<p>audio/x-ms-wma</p>
<p>.wmd</p>
<p>application/x-ms-wmd</p>
<p>.wmf</p>
<p>application/x-wmf</p>
<p>.wml</p>
<p>text/vnd.wap.wml</p>
<p>.wmv</p>
<p>video/x-ms-wmv</p>
<p>.wmx</p>
<p>video/x-ms-wmx</p>
<p>.wmz</p>
<p>application/x-ms-wmz</p>
<p>.wp6</p>
<p>application/x-wp6</p>
<p>.wpd</p>
<p>application/x-wpd</p>
<p>.wpg</p>
<p>application/x-wpg</p>
<p>.wpl</p>
<p>application/vnd.ms-wpl</p>
<p>.wq1</p>
<p>application/x-wq1</p>
<p>.wr1</p>
<p>application/x-wr1</p>
<p>.wri</p>
<p>application/x-wri</p>
<p>.wrk</p>
<p>application/x-wrk</p>
<p>.ws</p>
<p>application/x-ws</p>
<p>.ws2</p>
<p>application/x-ws</p>
<p>.wsc</p>
<p>text/scriptlet</p>
<p>.wsdl</p>
<p>text/xml</p>
<p>.wvx</p>
<p>video/x-ms-wvx</p>
<p>.xdp</p>
<p>application/vnd.adobe.xdp</p>
<p>.xdr</p>
<p>text/xml</p>
<p>.xfd</p>
<p>application/vnd.adobe.xfd</p>
<p>.xfdf</p>
<p>application/vnd.adobe.xfdf</p>
<p>.xhtml</p>
<p>text/html</p>
<p>.xls</p>
<p>application/vnd.ms-excel</p>
<p>.xls</p>
<p>application/x-xls</p>
<p>.xlw</p>
<p>application/x-xlw</p>
<p>.xml</p>
<p>text/xml</p>
<p>.xpl</p>
<p>audio/scpls</p>
<p>.xq</p>
<p>text/xml</p>
<p>.xql</p>
<p>text/xml</p>
<p>.xquery</p>
<p>text/xml</p>
<p>.xsd</p>
<p>text/xml</p>
<p>.xsl</p>
<p>text/xml</p>
<p>.xslt</p>
<p>text/xml</p>
<p>.xwd</p>
<p>application/x-xwd</p>
<p>.x_b</p>
<p>application/x-x_b</p>
<p>.sis</p>
<p>application/vnd.symbian.install</p>
<p>.sisx</p>
<p>application/vnd.symbian.install</p>
<p>.x_t</p>
<p>application/x-x_t</p>
<p>.ipa</p>
<p>application/vnd.iphone</p>
<p>.apk</p>
<p>application/vnd.android.package-archive</p>
<p>.xap</p>
<p>application/x-silverlight-app</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/18/e5-b8-b8-e7-94-a8-e6-96-87-e4-bb-b6-e5-90-8e-e7-bc-80-e4-b8-8econtent-type-e5-af-b9-e7-85-a7-e8-a1-a8/" data-id="cjnibxgj3009hgg0fb9jfkj37" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-90-86-e8-a7-a3oauth-2-0" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/15/e7-90-86-e8-a7-a3oauth-2-0/" class="article-date">
  <time datetime="2015-04-15T05:36:53.000Z" itemprop="datePublished">2015-04-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/15/e7-90-86-e8-a7-a3oauth-2-0/">理解OAuth 2.0</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://en.wikipedia.org/wiki/OAuth" target="_blank" rel="noopener">OAuth</a>是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。</p>
<p>本文对OAuth 2.0的设计思路和运行流程，做一个简明通俗的解释，主要参考材料为<a href="http://www.rfcreader.com/#rfc6749" target="_blank" rel="noopener">RFC 6749</a>。</p>
<p><img src="http://blog.daahe.com/wp-content/uploads/2015/04/bg20140512011.png" alt="OAuth Logo"></p>
<h2 id="一、应用场景"><a href="#一、应用场景" class="headerlink" title="一、应用场景"></a>一、应用场景</h2><p>为了理解OAuth的适用场合，让我举一个假设的例子。</p>
<p>有一个”云冲印”的网站，可以将用户储存在Google的照片，冲印出来。用户为了使用该服务，必须让”云冲印”读取自己储存在Google上的照片。</p>
<p><img src="http://image.beekka.com/blog/2014/bg2014051202.png" alt="云冲印"></p>
<p>问题是只有得到用户的授权，Google才会同意”云冲印”读取这些照片。那么，”云冲印”怎样获得用户的授权呢？</p>
<p>传统方法是，用户将自己的Google用户名和密码，告诉”云冲印”，后者就可以读取用户的照片了。这样的做法有以下几个严重的缺点。</p>
<blockquote>
<p>（1）”云冲印”为了后续的服务，会保存用户的密码，这样很不安全。</p>
<p>（2）Google不得不部署密码登录，而我们知道，单纯的密码登录并不安全。</p>
<p>（3）”云冲印”拥有了获取用户储存在Google所有资料的权力，用户没法限制”云冲印”获得授权的范围和有效期。</p>
<p>（4）用户只有修改密码，才能收回赋予”云冲印”的权力。但是这样做，会使得其他所有获得用户授权的第三方应用程序全部失效。</p>
<p>（5）只要有一个第三方应用程序被破解，就会导致用户密码泄漏，以及所有被密码保护的数据泄漏。</p>
</blockquote>
<p>OAuth就是为了解决上面这些问题而诞生的。</p>
<h2 id="二、名词定义"><a href="#二、名词定义" class="headerlink" title="二、名词定义"></a>二、名词定义</h2><p>在详细讲解OAuth 2.0之前，需要了解几个专用名词。它们对读懂后面的讲解，尤其是几张图，至关重要。</p>
<blockquote>
<p>（1） Third-party application：第三方应用程序，本文中又称”客户端”（client），即上一节例子中的”云冲印”。</p>
<p>（2）HTTP service：HTTP服务提供商，本文中简称”服务提供商”，即上一节例子中的Google。</p>
<p>（3）Resource Owner：资源所有者，本文中又称”用户”（user）。</p>
<p>（4）User Agent：用户代理，本文中就是指浏览器。</p>
<p>（5）Authorization server：认证服务器，即服务提供商专门用来处理认证的服务器。</p>
<p>（6）Resource server：资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。</p>
</blockquote>
<p>知道了上面这些名词，就不难理解，OAuth的作用就是让”客户端”安全可控地获取”用户”的授权，与”服务商提供商”进行互动。</p>
<h2 id="三、OAuth的思路"><a href="#三、OAuth的思路" class="headerlink" title="三、OAuth的思路"></a>三、OAuth的思路</h2><p>OAuth在”客户端”与”服务提供商”之间，设置了一个授权层（authorization layer）。”客户端”不能直接登录”服务提供商”，只能登录授权层，以此将用户与客户端区分开来。”客户端”登录授权层所用的令牌（token），与用户的密码不同。用户可以在登录的时候，指定授权层令牌的权限范围和有效期。</p>
<p>“客户端”登录授权层以后，”服务提供商”根据令牌的权限范围和有效期，向”客户端”开放用户储存的资料。</p>
<h2 id="四、运行流程"><a href="#四、运行流程" class="headerlink" title="四、运行流程"></a>四、运行流程</h2><p>OAuth 2.0的运行流程如下图，摘自RFC 6749。</p>
<p><img src="http://image.beekka.com/blog/2014/bg2014051203.png" alt="OAuth运行流程"></p>
<blockquote>
<p>（A）用户打开客户端以后，客户端要求用户给予授权。</p>
<p>（B）用户同意给予客户端授权。</p>
<p>（C）客户端使用上一步获得的授权，向认证服务器申请令牌。</p>
<p>（D）认证服务器对客户端进行认证以后，确认无误，同意发放令牌。</p>
<p>（E）客户端使用令牌，向资源服务器申请获取资源。</p>
<p>（F）资源服务器确认令牌无误，同意向客户端开放资源。</p>
</blockquote>
<p>不难看出来，上面六个步骤之中，B是关键，即用户怎样才能给于客户端授权。有了这个授权以后，客户端就可以获取令牌，进而凭令牌获取资源。</p>
<p>下面一一讲解客户端获取授权的四种模式。</p>
<h2 id="五、客户端的授权模式"><a href="#五、客户端的授权模式" class="headerlink" title="五、客户端的授权模式"></a>五、客户端的授权模式</h2><p>客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth 2.0定义了四种授权方式。</p>
<ul>
<li>授权码模式（authorization code）</li>
<li>简化模式（implicit）</li>
<li>密码模式（resource owner password credentials）</li>
<li>客户端模式（client credentials）</li>
</ul>
<h2 id="六、授权码模式"><a href="#六、授权码模式" class="headerlink" title="六、授权码模式"></a>六、授权码模式</h2><p>授权码模式（authorization code）是功能最完整、流程最严密的授权模式。它的特点就是通过客户端的后台服务器，与”服务提供商”的认证服务器进行互动。</p>
<p><img src="http://image.beekka.com/blog/2014/bg2014051204.png" alt="授权码模式"></p>
<p>它的步骤如下：</p>
<blockquote>
<p>（A）用户访问客户端，后者将前者导向认证服务器。</p>
<p>（B）用户选择是否给予客户端授权。</p>
<p>（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的”重定向URI”（redirection URI），同时附上一个授权码。</p>
<p>（D）客户端收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌。这一步是在客户端的后台的服务器上完成的，对用户不可见。</p>
<p>（E）认证服务器核对了授权码和重定向URI，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。</p>
</blockquote>
<p>下面是上面这些步骤所需要的参数。</p>
<p>A步骤中，客户端申请认证的URI，包含以下参数：</p>
<ul>
<li>response_type：表示授权类型，必选项，此处的值固定为”code”</li>
<li>client_id：表示客户端的ID，必选项</li>
<li>redirect_uri：表示重定向URI，可选项</li>
<li>scope：表示申请的权限范围，可选项</li>
<li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>GET /authorize?response_type=code&amp;client_id=s6BhdRkqt3&amp;state=xyz
        &amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1
Host: server.example.com
</code></pre></blockquote>
<p>C步骤中，服务器回应客户端的URI，包含以下参数：</p>
<ul>
<li>code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次，否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。</li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>HTTP/1.1 302 Found
Location: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA
          &amp;state=xyz
</code></pre></blockquote>
<p>D步骤中，客户端向认证服务器申请令牌的HTTP请求，包含以下参数：</p>
<ul>
<li>grant_type：表示使用的授权模式，必选项，此处的值固定为”authorization_code”。</li>
<li>code：表示上一步获得的授权码，必选项。</li>
<li>redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。</li>
<li>client_id：表示客户端ID，必选项。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>POST /token HTTP/1.1
Host: server.example.com
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&amp;code=SplxlOBeZQQYbYS6WxSbIA
&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb
</code></pre></blockquote>
<p>E步骤中，认证服务器发送的HTTP回复，包含以下参数：</p>
<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>refresh_token：表示更新令牌，用来获取下一次的访问令牌，可选项。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: no-store
Pragma: no-cache

{
  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,
  &quot;token_type&quot;:&quot;example&quot;,
  &quot;expires_in&quot;:3600,
  &quot;refresh_token&quot;:&quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;,
  &quot;example_parameter&quot;:&quot;example_value&quot;
}
</code></pre></blockquote>
<p>从上面代码可以看到，相关参数使用JSON格式发送（Content-Type: application/json）。此外，HTTP头信息中明确指定不得缓存。</p>
<h2 id="七、简化模式"><a href="#七、简化模式" class="headerlink" title="七、简化模式"></a>七、简化模式</h2><p>简化模式（implicit grant type）不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了”授权码”这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。</p>
<p><img src="http://image.beekka.com/blog/2014/bg2014051205.png" alt="简化模式"></p>
<p>它的步骤如下：</p>
<blockquote>
<p>（A）客户端将用户导向认证服务器。</p>
<p>（B）用户决定是否给于客户端授权。</p>
<p>（C）假设用户给予授权，认证服务器将用户导向客户端指定的”重定向URI”，并在URI的Hash部分包含了访问令牌。</p>
<p>（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。</p>
<p>（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。</p>
<p>（F）浏览器执行上一步获得的脚本，提取出令牌。</p>
<p>（G）浏览器将令牌发给客户端。</p>
</blockquote>
<p>下面是上面这些步骤所需要的参数。</p>
<p>A步骤中，客户端发出的HTTP请求，包含以下参数：</p>
<ul>
<li>response_type：表示授权类型，此处的值固定为”token”，必选项。</li>
<li>client_id：表示客户端的ID，必选项。</li>
<li>redirect_uri：表示重定向的URI，可选项。</li>
<li>scope：表示权限范围，可选项。</li>
<li>state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>GET /authorize?response_type=token&amp;client_id=s6BhdRkqt3&amp;state=xyz
    &amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1
Host: server.example.com
</code></pre></blockquote>
<p>C步骤中，认证服务器回应客户端的URI，包含以下参数：</p>
<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>HTTP/1.1 302 Found
Location: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA
          &amp;state=xyz&amp;token_type=example&amp;expires_in=3600
</code></pre></blockquote>
<p>在上面的例子中，认证服务器用HTTP头信息的Location栏，指定浏览器重定向的网址。注意，在这个网址的Hash部分包含了令牌。</p>
<p>根据上面的D步骤，下一步浏览器会访问Location指定的网址，但是Hash部分不会发送。接下来的E步骤，服务提供商的资源服务器发送过来的代码，会提取出Hash中的令牌。</p>
<h2 id="八、密码模式"><a href="#八、密码模式" class="headerlink" title="八、密码模式"></a>八、密码模式</h2><p>密码模式（Resource Owner Password Credentials Grant）中，用户向客户端提供自己的用户名和密码。客户端使用这些信息，向”服务商提供商”索要授权。</p>
<p>在这种模式中，用户必须把自己的密码给客户端，但是客户端不得储存密码。这通常用在用户对客户端高度信任的情况下，比如客户端是操作系统的一部分，或者由一个著名公司出品。而认证服务器只有在其他授权模式无法执行的情况下，才能考虑使用这种模式。</p>
<p><img src="http://image.beekka.com/blog/2014/bg2014051206.png" alt="密码模式"></p>
<p>它的步骤如下：</p>
<blockquote>
<p>（A）用户向客户端提供用户名和密码。</p>
<p>（B）客户端将用户名和密码发给认证服务器，向后者请求令牌。</p>
<p>（C）认证服务器确认无误后，向客户端提供访问令牌。</p>
</blockquote>
<p>B步骤中，客户端发出的HTTP请求，包含以下参数：</p>
<ul>
<li>grant_type：表示授权类型，此处的值固定为”password”，必选项。</li>
<li>username：表示用户名，必选项。</li>
<li>password：表示用户的密码，必选项。</li>
<li>scope：表示权限范围，可选项。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>POST /token HTTP/1.1
Host: server.example.com
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type: application/x-www-form-urlencoded

grant_type=password&amp;username=johndoe&amp;password=A3ddj3w
</code></pre></blockquote>
<p>C步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。</p>
<blockquote>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: no-store
Pragma: no-cache

{
  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,
  &quot;token_type&quot;:&quot;example&quot;,
  &quot;expires_in&quot;:3600,
  &quot;refresh_token&quot;:&quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;,
  &quot;example_parameter&quot;:&quot;example_value&quot;
}
</code></pre></blockquote>
<p>上面代码中，各个参数的含义参见《授权码模式》一节。</p>
<p>整个过程中，客户端不得保存用户的密码。</p>
<h2 id="九、客户端模式"><a href="#九、客户端模式" class="headerlink" title="九、客户端模式"></a>九、客户端模式</h2><p>客户端模式（Client Credentials Grant）指客户端以自己的名义，而不是以用户的名义，向”服务提供商”进行认证。严格地说，客户端模式并不属于OAuth框架所要解决的问题。在这种模式中，用户直接向客户端注册，客户端以自己的名义要求”服务提供商”提供服务，其实不存在授权问题。</p>
<p><img src="http://image.beekka.com/blog/2014/bg2014051207.png" alt="客户端模式"></p>
<p>它的步骤如下：</p>
<blockquote>
<p>（A）客户端向认证服务器进行身份认证，并要求一个访问令牌。</p>
<p>（B）认证服务器确认无误后，向客户端提供访问令牌。</p>
</blockquote>
<p>A步骤中，客户端发出的HTTP请求，包含以下参数：</p>
<ul>
<li>granttype：表示授权类型，此处的值固定为”clientcredentials”，必选项。</li>
<li>scope：表示权限范围，可选项。</li>
</ul>
<blockquote>
<pre><code>POST /token HTTP/1.1
Host: server.example.com
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials
</code></pre></blockquote>
<p>认证服务器必须以某种方式，验证客户端身份。</p>
<p>B步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。</p>
<blockquote>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: no-store
Pragma: no-cache

{
  &quot;access_token&quot;:&quot;2YotnFZFEjr1zCsicMWpAA&quot;,
  &quot;token_type&quot;:&quot;example&quot;,
  &quot;expires_in&quot;:3600,
  &quot;example_parameter&quot;:&quot;example_value&quot;
}
</code></pre></blockquote>
<p>上面代码中，各个参数的含义参见《授权码模式》一节。</p>
<h2 id="十、更新令牌"><a href="#十、更新令牌" class="headerlink" title="十、更新令牌"></a>十、更新令牌</h2><p>如果用户访问的时候，客户端的”访问令牌”已经过期，则需要使用”更新令牌”申请一个新的访问令牌。</p>
<p>客户端发出更新令牌的HTTP请求，包含以下参数：</p>
<ul>
<li>granttype：表示使用的授权模式，此处的值固定为”refreshtoken”，必选项。</li>
<li>refresh_token：表示早前收到的更新令牌，必选项。</li>
<li>scope：表示申请的授权范围，不可以超出上一次申请的范围，如果省略该参数，则表示与上一次一致。</li>
</ul>
<p>下面是一个例子。</p>
<blockquote>
<pre><code>POST /token HTTP/1.1
Host: server.example.com
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&amp;refresh_token=tGzv3JOkF0XG5Qx2TlKWIA
</code></pre></blockquote>
<p>（完）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.daahe.com/2015/04/15/e7-90-86-e8-a7-a3oauth-2-0/" data-id="cjnibxgje009xgg0f5dj3nk2a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/j2ee/">j2ee</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/j2ee/Linux/">Linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/道听途说/">道听途说</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataCross/">DataCross</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flex/">Flex</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hibernate/">Hibernate</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/j2ee/">j2ee</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jvm/">jvm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/生活/道听途说/">道听途说</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/私人日志/">私人日志</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/道听途说/">道听途说</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google-Map/">Google Map</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MapView/">MapView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI设计/">UI设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/datacross/">datacross</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ui/">ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xp-启动不输入密码/">xp 启动不输入密码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/切换/">切换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原则/">原则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发/">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据转换/">数据转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/格式转换/">格式转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/横屏/">横屏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/注销/">注销</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/监听/">监听</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/竖屏/">竖屏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/返回/">返回</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Google-Map/" style="font-size: 10px;">Google Map</a> <a href="/tags/MapView/" style="font-size: 10px;">MapView</a> <a href="/tags/UI设计/" style="font-size: 10px;">UI设计</a> <a href="/tags/datacross/" style="font-size: 10px;">datacross</a> <a href="/tags/ui/" style="font-size: 10px;">ui</a> <a href="/tags/xp-启动不输入密码/" style="font-size: 10px;">xp 启动不输入密码</a> <a href="/tags/切换/" style="font-size: 10px;">切换</a> <a href="/tags/原则/" style="font-size: 10px;">原则</a> <a href="/tags/开发/" style="font-size: 15px;">开发</a> <a href="/tags/数据转换/" style="font-size: 10px;">数据转换</a> <a href="/tags/格式转换/" style="font-size: 10px;">格式转换</a> <a href="/tags/横屏/" style="font-size: 10px;">横屏</a> <a href="/tags/注销/" style="font-size: 10px;">注销</a> <a href="/tags/监听/" style="font-size: 10px;">监听</a> <a href="/tags/竖屏/" style="font-size: 10px;">竖屏</a> <a href="/tags/返回/" style="font-size: 10px;">返回</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">January 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">June 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/01/">January 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">August 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/12/">December 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/10/">October 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/09/">September 2007</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/10/21/world-without-language/">无言的世界</a>
          </li>
        
          <li>
            <a href="/2018/10/21/the-summary-day/">那年夏天</a>
          </li>
        
          <li>
            <a href="/2018/10/21/feature/">我们的未来</a>
          </li>
        
          <li>
            <a href="/2018/10/21/react/">react</a>
          </li>
        
          <li>
            <a href="/2018/10/21/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 daahe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<!-- script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script -->


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>